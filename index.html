<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Capitaine Trading ‚Äì Phase 2</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{margin:0;font-family:Arial,sans-serif;background:#0f1f1a;color:#fff;}
header{background:#0b3d2e;padding:15px;text-align:center;}
nav{display:flex;justify-content:space-around;background:#146356;padding:10px;position:sticky;top:0;}
nav button{background:#ff9800;border:none;padding:8px;border-radius:6px;font-weight:bold;}
section{display:none;padding:15px;}
section.active{display:block}
.card{background:#142e26;padding:15px;border-radius:10px;margin-bottom:10px;}
input{width:100%;padding:10px;margin:6px 0;border-radius:6px;border:none;}
.btn{width:100%;padding:10px;background:#ff9800;border:none;border-radius:8px;font-weight:bold;}
.notice{background:#1f4036;padding:8px;border-radius:6px;margin-top:8px;}
.scroll{max-height:200px;overflow-y:auto;}
.notification{background:#ff9800;color:#000;padding:6px;border-radius:5px;margin-bottom:5px;}
footer{text-align:center;font-size:12px;color:#aaa;padding:10px;}
table th, table td{border:1px solid #334155;padding:8px;}
table th{background:#1f2937;}
</style>
</head>

<body>

<header>
<h2>Capitaine Trading</h2>
<p>Plateforme de trading ‚Äì Phase 2</p>
</header>

<nav>
<button onclick="show('login')">Connexion</button>
<button onclick="show('signup')">Cr√©er un compte</button>
<button onclick="show('dashboard')">Dashboard</button>
<button onclick="show('trade')">Trader</button>
<button onclick="show('account')">Compte</button>
</nav>

<!-- SECTION LOGIN -->
<section id="login" class="active">
<div class="card">
<h3>Connexion</h3>
<input id="user" placeholder="Utilisateur">
<input id="pass" type="password" placeholder="Mot de passe">
<button class="btn" onclick="login()">Se connecter</button>
<p style="text-align:center;margin-top:10px">
<a href="#" onclick="show('signup')" style="color:#ff9800">Cr√©er un compte</a>
</p>
</div>
</section>

<!-- SECTION SIGNUP -->
<section id="signup">
<div class="card">
<h3>Cr√©er un compte</h3>
<input id="newUser" placeholder="Nom utilisateur">
<input id="newPass" type="password" placeholder="Mot de passe">
<input id="refCode" placeholder="Code parrain (optionnel)">
<button class="btn" onclick="createAccount()">Cr√©er</button>
<div id="signupMsg" class="notice"></div>
</div>
</section>

<!-- DASHBOARD -->
<section id="dashboard">
<div class="card">
<h3>Solde</h3>
<h2 id="balance">0.00 USDT</h2>
</div>

<div class="card">
<h3>Notifications</h3>
<div id="notifs" class="scroll"></div>
</div>

<div class="card">
<canvas id="chart"></canvas>
</div>

<div class="card">
<h3>Historique des transactions</h3>
<table id="historyTable" style="width:100%;border-collapse:collapse;color:#fff">
<thead>
<tr>
<th>Date / Heure</th>
<th>Type</th>
<th>Montant (USDT)</th>
<th>Statut</th>
</tr>
</thead>
<tbody id="historyBody">
<tr><td colspan="4" style="text-align:center;padding:10px">Aucune transaction pour l‚Äôinstant</td></tr>
</tbody>
</table>
</div>
</section>

<!-- TRADE -->
<section id="trade">
<div class="card">
<h3>Signal</h3>
<p id="signalMsg">En attente‚Ä¶</p>
<button class="btn" onclick="getSignal()">Trader maintenant</button>
<div id="tradeMsg" class="notice"></div>
</div>
</section>

<!-- ACCOUNT -->
<section id="account">
<div class="card">
<h3>Mon compte</h3>
<p>Utilisateur : <span id="accUser"></span></p>
<p>Code parrain : <span id="myCode"></span></p>
<input id="newPassAcc" type="password" placeholder="Nouveau mot de passe">
<button class="btn" onclick="changePass()">Modifier mot de passe</button>
<div id="accMsg" class="notice"></div>
</div>
</section>

<footer>
support@capitainetrading.com | urgence@capitainetrading.com
</footer>

<script>
// --- USERS ---
let users={
 admin:{pass:"admin243",balance:100,code:"ADMIN123",refs:[]}
};
let current=null;
let used=false;

// --- NAVIGATION ---
function show(id){
 document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
 document.getElementById(id).classList.add("active");
}

// --- LOGIN ---
function login(){
 let u=user.value,p=pass.value;
 if(users[u] && users[u].pass===p){
  current=u;
  update();
  show("dashboard");
  draw();
 }else alert("Erreur");
}

// --- SIGNUP ---
function createAccount(){
 let u=newUser.value,p=newPass.value,r=refCode.value;
 if(users[u]){signupMsg.innerText="Existe d√©j√†";return;}
 let code=u.toUpperCase()+Math.floor(Math.random()*1000);
 users[u]={pass:p,balance:50,code:code,refs:[]};
 signupMsg.innerText="Compte cr√©√©. Code parrain : "+code;
 if(r){
  for(let k in users){
   if(users[k].code===r){
    users[k].balance+=8;
    users[k].refs.push(u);
    notify("Parrainage +8 USDT pour "+k);
   }
  }
 }
}

// --- UPDATE ---
function update(){
 balance.innerText=users[current].balance.toFixed(2)+" USDT";
 accUser.innerText=current;
 myCode.innerText=users[current].code;
}

// --- NOTIFICATIONS ---
function notify(t){
 let d=document.createElement("div");
 d.className="notification";
 d.innerText=t;
 notifs.prepend(d);
}

// --- TRADE ---
let lastSignal=0;
function getSignal(){
 const now=Date.now();
 if(now-lastSignal < 4*60*60*1000){
   signalMsg.innerText="‚è≥ Signal indisponible ‚Äì prochain dans 4h";
 } else {
   lastSignal=now;
   const gain=(Math.random()*10-5);
   signalMsg.innerText="üìà Signal g√©n√©r√© ‚Äì march√© simul√©: "+gain.toFixed(2)+" USDT";
   users[current].balance+=gain;
   update();
   addHistory("Trade", gain);
   notify("Trade ex√©cut√©");
 }
}

// --- HISTORIQUE DES TRANSACTIONS ---
let history=[];
function addHistory(type, amount){
 const now=new Date();
 const row={date:now.toLocaleString(),type:type,amount:amount.toFixed(2),status:"Valid√©"};
 history.unshift(row);
 updateHistoryTable();
}
function updateHistoryTable(){
 const tbody=document.getElementById("historyBody");
 tbody.innerHTML="";
 if(history.length===0){
   tbody.innerHTML='<tr><td colspan="4" style="text-align:center;padding:10px">Aucune transaction pour l‚Äôinstant</td></tr>';
   return;
 }
 history.forEach(r=>{
   const tr=document.createElement("tr");
   tr.innerHTML=`<td>${r.date}</td><td>${r.type}</td><td>${r.amount}</td><td>${r.status}</td>`;
   tbody.appendChild(tr);
 });
}

// --- CHANGE PASSWORD ---
function changePass(){
 users[current].pass=newPassAcc.value;
 accMsg.innerText="Mot de passe modifi√©";
 notify("Mot de passe chang√©");
}

// --- GRAPH ---
function draw(){
 new Chart(chart,{type:"line",
 data:{labels:[1,2,3,4,5],
 datasets:[{data:[10,12,9,14,11],borderColor:"#ff9800"}]},
 options:{responsive:true,plugins:{legend:{display:false}}}
 });
}
</script>

</body>
</html>
