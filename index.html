<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Exchange PRO ‚Äì Version D√©mo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#0b0f1a;color:#fff}
header{position:sticky;top:0;background:#0f172a;padding:12px;display:flex;justify-content:space-between;align-items:center;z-index:1000}
button{padding:8px 14px;border:none;border-radius:6px;cursor:pointer}
.primary{background:#2563eb;color:#fff}
.secondary{background:#1e293b;color:#fff}
section{padding:40px 15px}
.hidden{display:none}
.card{background:#111827;padding:15px;border-radius:10px;margin-bottom:15px}
input{width:100%;padding:10px;margin:8px 0;border-radius:6px;border:none}
small{color:#94a3b8}
h2,h3{margin-top:0}
.market{height:300px;background:#020617;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px;color:#38bdf8}
.nav{display:flex;gap:10px}<button id="btnAdmin" style="display:none;" onclick="showAdmin()">Admin</button>
</style>
</head>

<body>

<header>
  <strong>Exchange PRO</strong>
  <div class="nav">
    <button class="secondary" onclick="show('login')">Connexion</button>
    <button class="primary" onclick="show('signup')">S‚Äôinscrire</button>
  </div>
</header>

<section id="home">
  <h2>Plateforme de Trading Num√©rique</h2>
  <p>Solution moderne conforme aux standards des exchanges internationaux.</p>
  <div class="market" id="tradingChartContainer">
    <canvas id="tradingChart"></canvas>
  </div>
</section>

<section id="login" class="hidden">
  <div class="card">
    <h3>Connexion</h3>
    <input id="loginEmail" placeholder="Email">
    <input id="loginPass" type="password" placeholder="Mot de passe">
    <button class="primary" onclick="login()">Se connecter</button>
  </div>
</section>

<section id="signup" class="hidden">
  <div class="card">
    <h3>Inscription</h3>
    <input id="signEmail" placeholder="Email uniquement">
    <input type="password" placeholder="Mot de passe">
    <button class="primary" onclick="signup()">Cr√©er un compte</button>
    <small>Inscription par email uniquement (s√©curit√© renforc√©e)</small>
  </div>
</section>

<section id="user" class="hidden">
  <h2>Tableau de bord utilisateur</h2>

  <div class="card">
    <strong>UID utilisateur :</strong> <span id="uid"></span>
  </div>

  <div class="card">
    <h3>Signal de trading</h3>
    <button class="primary" onclick="getSignal()">Trader</button>
    <p id="signalMsg"></p>
  </div>

  <div class="card">
    <h3>Retrait</h3>
    <p>UID administrateur requis (expire apr√®s usage)</p>
    <input placeholder="UID admin">
    <button class="secondary">Demander retrait</button>
  </div>

  <div class="card">
    <h3>Historique</h3>
    <small>Aucune transaction r√©elle ‚Äì environnement simul√©</small>
  </div>
</section>

<section id="admin" class="hidden">
  <h2>Dashboard Administrateur</h2>

  <div class="card">
    <h3>Envoyer solde utilisateur</h3>
    <input placeholder="UID utilisateur">
    <input placeholder="Montant USDT">
    <button class="primary">Valider envoi</button>
    <small>Double confirmation requise</small>
  </div>

  <div class="card">
    <h3>Gestion des signaux</h3>
    <p>4 signaux toutes les 4 heures</p>
  </div><div class="card">
  <h3>Dashboard Administrateur</h3>

  <label>UID Utilisateur :</label>
  <input id="adminUID" placeholder="Nom utilisateur √† cr√©diter">

  <label>Montant USDT :</label>
  <input id="adminAmount" type="number" placeholder="Montant √† envoyer">

  <button class="btn" onclick="sendBalance()">Valider envoi (Double confirmation)</button>

  <div id="adminMsg" class="notice" style="margin-top:10px"></div>
</div>

<div class="card">
  <h3>Gestion des signaux</h3>
  <p>4 signaux toutes les 4 heures</p>
  <button class="btn" onclick="adminSignal()">G√©n√©rer signal</button>
  <div id="adminSignalMsg" class="notice"></div>
</div>
</section>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let lastSignal = 0;

function show(id){
  document.querySelectorAll("section").forEach(s=>s.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

function signup(){
  alert("Compte cr√©√© (d√©mo)");
  show("login");
}

function login(){
 function login(){
  let u = user.value;      // r√©cup√®re le nom d'utilisateur
  let p = pass.value;      // r√©cup√®re le mot de passe

  if(users[u] && users[u].pass === p){
    current = u;           // d√©finit l'utilisateur courant
    update();              // met √† jour le solde, le code parrain, etc.

    // ‚ö° Si c'est l'administrateur, afficher Admin
    if(current === "admin"){
      show("admin");       // affiche la section Admin
    } else {
      show("dashboard");   // sinon affiche le dashboard utilisateur
    }

    draw(); // met √† jour le graphique
  } else {
    alert("Erreur : utilisateur ou mot de passe incorrect");
  }
}

function getSignal(){
  const now=Date.now();
  if(now-lastSignal<4*60*60*1000){
    document.getElementById("signalMsg").innerText="‚è≥ Signal indisponible ‚Äì prochain dans 4h";
  }else{
    lastSignal=now;
    document.getElementById("signalMsg").innerText="üìà Signal g√©n√©r√© ‚Äì march√© simul√©";
  }
}
// --- MISE √Ä JOUR DU DASHBOARD ---
function update(){
  if(!current) return;

  // Met √† jour le solde
  balance.innerText = users[current].balance.toFixed(2) + " USDT";

  // Met √† jour les infos compte
  accUser.innerText = current;
  myCode.innerText = users[current].code;

  // Afficher bouton Admin uniquement si c'est admin
  if(current === "admin"){ 
      document.getElementById("btnAdmin").style.display = "inline-block"; 
  } else { 
      document.getElementById("btnAdmin").style.display = "none"; 
  }
  }
// --- GRAPH TRADINGVIEW SIMUL√â ---
const ctx = document.getElementById('tradingChart').getContext('2d');
new Chart(ctx, {
    type: 'line', // visuel pro
    data: {
        labels: ['09h','10h','11h','12h','13h','14h','15h'],
        datasets: [{
            label: 'USD/USDT',
            data: [100,102,106,105,110,113,116],
            borderColor: '#ff9800',
            backgroundColor: '#2563eb',
            fill: true
        }]
    },
    options: {
        responsive:true,
        plugins:{legend:{display:false}},
        scales:{
            x:{grid:{color:'#1e293b'}},
            y:{grid:{color:'#1e293b'}}
        }
    }
});
// --- ADMIN ---
function showAdmin(){
 if(current === "admin"){ 
    show("admin"); 
 } else { 
    alert("Acc√®s interdit : r√©serv√© √† l‚Äôadministrateur"); 
 }
}

// --- ENVOI SOLDE ---
function sendBalance(){
 const uid = adminUID.value;
 const amount = parseFloat(adminAmount.value);

 if(!users[uid]){
   adminMsg.innerText="Utilisateur introuvable"; 
   return;
 }

 if(isNaN(amount) || amount <= 0){
   adminMsg.innerText="Montant invalide"; 
   return;
 }

 if(!confirm(`Confirmer l‚Äôenvoi de ${amount.toFixed(2)} USDT √† ${uid} ?`)){
   adminMsg.innerText="Envoi annul√©"; 
   return;
 }

 users[uid].balance += amount;
 adminMsg.innerText=`‚úÖ ${amount.toFixed(2)} USDT envoy√© √† ${uid}`;
 notify(`Admin a cr√©dit√© ${amount.toFixed(2)} USDT √† ${uid}`);
 update(); // Met √† jour le dashboard
}

// --- ADMIN SIGNAL ---
function adminSignal(){
 const gain = (Math.random()*10-5);
 notify(`Signal Admin g√©n√©r√©: ${gain.toFixed(2)} USDT`);
 adminSignalMsg.innerText=`Signal g√©n√©r√©: ${gain.toFixed(2)} USDT`;
 lastSignal = Date.now(); // reset le signal pour tout le monde
      }</script>

</body>
</html>
